<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spheron dappathon Season 2 Movie NFT</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.4.1/dist/css/bootstrap.min.css" integrity="sha384-HSMxcRTRxnN+Bdg0JdbxYKrThecOKuH5zCYotlSAcp1+c8xmyTe9GYg1l9a69psu" crossorigin="anonymous">
</head>
<body>
    <div class="container">
    <h2>Spheron dappathon Season 2 Movie NFT</h2>
    <div id="totalSupply">Total Supply: Loading...</div>
    <br>
    <img src="banner.jpeg" width="500px">
    <br><br>
    <button id="mintButton" class="btn btn-primary">Mint Free NFT</button>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.5.0/dist/web3.min.js"></script>
    <script>
        // Define the contract address and ABI (replace with your actual values)
        const contractAddress = "0x77DdDe24633690c1ef4d7ac4ABd40C97e11724F5";
        const contractABI = [{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"string","name":"baseTokenURI","type":"string"}],"type":"constructor","stateMutability":"nonpayable"},{"name":"Approval","inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"type":"event"},{"name":"ApprovalForAll","inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"type":"event"},{"name":"RoleAdminChanged","inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"previousAdminRole","type":"bytes32"},{"indexed":true,"internalType":"bytes32","name":"newAdminRole","type":"bytes32"}],"type":"event"},{"name":"RoleGranted","inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"type":"event"},{"name":"RoleRevoked","inputs":[{"indexed":true,"internalType":"bytes32","name":"role","type":"bytes32"},{"indexed":true,"internalType":"address","name":"account","type":"address"},{"indexed":true,"internalType":"address","name":"sender","type":"address"}],"type":"event"},{"name":"Transfer","inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"type":"event"},{"name":"DEFAULT_ADMIN_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"type":"function","stateMutability":"view"},{"name":"MINTER_ROLE","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"type":"function","stateMutability":"view"},{"name":"approve","inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"type":"function","stateMutability":"nonpayable"},{"name":"balanceOf","inputs":[{"internalType":"address","name":"owner","type":"address"}],"outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"type":"function","stateMutability":"view"},{"name":"getApproved","inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"outputs":[{"internalType":"address","name":"","type":"address"}],"type":"function","stateMutability":"view"},{"name":"getRoleAdmin","inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"}],"outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"type":"function","stateMutability":"view"},{"name":"grantRole","inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"type":"function","stateMutability":"nonpayable"},{"name":"hasRole","inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"outputs":[{"internalType":"bool","name":"","type":"bool"}],"type":"function","stateMutability":"view"},{"name":"isApprovedForAll","inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"outputs":[{"internalType":"bool","name":"","type":"bool"}],"type":"function","stateMutability":"view"},{"name":"mint","inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"_tokenId","type":"uint256"}],"type":"function","stateMutability":"nonpayable"},{"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"type":"function","stateMutability":"view"},{"name":"ownerOf","inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"outputs":[{"internalType":"address","name":"","type":"address"}],"type":"function","stateMutability":"view"},{"name":"renounceRole","inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"type":"function","stateMutability":"nonpayable"},{"name":"revokeRole","inputs":[{"internalType":"bytes32","name":"role","type":"bytes32"},{"internalType":"address","name":"account","type":"address"}],"type":"function","stateMutability":"nonpayable"},{"name":"safeTransferFrom","inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"type":"function","stateMutability":"nonpayable"},{"name":"safeTransferFrom","inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"type":"function","stateMutability":"nonpayable"},{"name":"setApprovalForAll","inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"type":"function","stateMutability":"nonpayable"},{"name":"supportsInterface","inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"outputs":[{"internalType":"bool","name":"","type":"bool"}],"type":"function","stateMutability":"view"},{"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"type":"function","stateMutability":"view"},{"name":"tokenByIndex","inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"type":"function","stateMutability":"view"},{"name":"tokenOfOwnerByIndex","inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"type":"function","stateMutability":"view"},{"name":"tokenURI","inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"outputs":[{"internalType":"string","name":"","type":"string"}],"type":"function","stateMutability":"view"},{"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"type":"function","stateMutability":"view"},{"name":"transferFrom","inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"type":"function","stateMutability":"nonpayable"}];
        // Initialize Web3.js
        let web3;
        if (typeof window.ethereum !== 'undefined') {
            web3 = new Web3(window.ethereum);
            window.ethereum.enable().catch(error => {
                console.error(error);
            });
        } else {
            console.error('Web3 not found. Please install a web3 wallet like MetaMask.');
        }

        // Create a contract instance
        const contract = new web3.eth.Contract(contractABI, contractAddress);

        // Function to mint an NFT
        async function mintNFT() {
            try {
                const accounts = await web3.eth.getAccounts();
                if (accounts.length === 0) {
                    console.error('No Ethereum accounts detected. Please connect your wallet.');
                    return;
                }

                const owner = accounts[0]; // Assuming the user is the owner

                // Call the mint function from the contract
                await contract.methods.mint(owner).send({ from: owner });

                alert('NFT Minted successfully!');
                updateTotalSupply();
            } catch (error) {
                console.error('Error minting NFT:', error);
            }
        }

        // Function to fetch and update the total supply
        async function updateTotalSupply() {
            const totalSupply = await contract.methods.totalSupply().call();
            document.getElementById('totalSupply').textContent = `Total Supply: ${totalSupply}`;
        }

        // Event listener for the mint button
        const mintButton = document.getElementById('mintButton');
        mintButton.addEventListener('click', mintNFT);

        // Initial update of total supply
        //updateTotalSupply();
    </script>
    </div>
</body>
</html>
